image:
  file: .gitpod.Dockerfile

tasks:
  - init: |
      sudo apt-get update
      sudo apt-get install -y clang cmake ninja-build pkg-config libgtk-3-dev
      git clone https://github.com/flutter/flutter.git -b stable --depth 1
      echo "export PATH=\"\$PATH:/workspace/Via/flutter/bin\"" >> ~/.bashrc
      source ~/.bashrc
      flutter doctor -v
      flutter config --enable-web
      flutter pub get
    command: flutter run -d web-server --web-port 3000

ports:
  - port: 3000
    onOpen: open-preview
